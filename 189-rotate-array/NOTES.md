using an intermediate array approach